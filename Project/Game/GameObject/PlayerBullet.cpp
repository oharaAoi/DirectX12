#include "PlayerBullet.h"

PlayerBullet::PlayerBullet() {
}

PlayerBullet::~PlayerBullet() {
}

void PlayerBullet::Finalize() {
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　初期化処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void PlayerBullet::Init() {
	isAlive_ = true;
	BaseGameObject::Init();
	SetObject("cube.obj");
	transform_->SetScale({ 0.5f, 0.5f, 0.5f });
	speed_ = 2.0f;

	tag_ = "playerBullet";
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　更新処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void PlayerBullet::Update() {
	Vector3 pos = transform_->GetTranslation();
	pos += velocity_ * speed_;
	transform_->SetTranslaion(pos);
	BaseGameObject::Update();
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　描画
//////////////////////////////////////////////////////////////////////////////////////////////////

void PlayerBullet::Draw() const {
	BaseGameObject::Draw(); 
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　衝突時の処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void PlayerBullet::OnCollision(Collider* other) {
	if (other->GetTag() == "enemy") {
		isAlive_ = false;
		Player::AddScore(40);
		KnockDownEnemy::SetObj("star.obj", 40);
	}
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　World上の座標を返す
//////////////////////////////////////////////////////////////////////////////////////////////////

const Vector3 PlayerBullet::GetWorldPos() const {
	return Transform(Vector3::ZERO(), transform_->GetWorldMatrix());
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　生成時の座標を指定する
//////////////////////////////////////////////////////////////////////////////////////////////////

void PlayerBullet::SetPopPos(const Vector3& pos) {
	transform_->SetTranslaion(pos);
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　Debug表示
//////////////////////////////////////////////////////////////////////////////////////////////////
#ifdef _DEBUG
void PlayerBullet::Debug_Gui() {
}
#endif