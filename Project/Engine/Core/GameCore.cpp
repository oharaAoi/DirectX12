#include "GameCore.h"

GameCore::GameCore() {}
GameCore::~GameCore() {}


//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　終了処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void GameCore::Finalize() {
	sceneManger_->Finalize();
	AoiFramework::Finalize();
}


//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　初期化処理
//////////////////////////////////////////////////////////////////////////////////////////////////
void GameCore::Init() {
	AoiFramework::Init();

	sceneManger_ = std::make_unique<SceneManager>();
	sceneManger_->Init();
	sceneManger_->SetChange(SceneType::TITLE);
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　更新処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void GameCore::Update() {
	gameTimer_.Reset();
	AoiFramework::Update();

#ifdef _DEBUG
	if (Engine::GetRunGame()) {
		sceneManger_->Update();
	}
	Debug_Gui();
#else 
	sceneManger_->Update();
#endif
	Render::Update();
	Engine::UpdateEditerWindow();
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　描画処理
//////////////////////////////////////////////////////////////////////////////////////////////////

void GameCore::Draw() {
#ifdef _DEBUG
	if (Engine::GetRunGame()) {
		sceneManger_->Draw();
	}
#else 
	sceneManger_->Draw();
#endif
	
	Engine::EndFrame();
	// fpsの計算
	gameTimer_.CalculationFrame();
}

//////////////////////////////////////////////////////////////////////////////////////////////////
// ↓　Debug処理
//////////////////////////////////////////////////////////////////////////////////////////////////
#ifdef _DEBUG
void GameCore::Debug_Gui() {
	sceneManger_->Debug_Gui();

	gameTimer_.Debug();
	
}
#endif